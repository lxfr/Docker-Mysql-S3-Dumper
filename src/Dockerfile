FROM ubuntu:trusty
RUN apt-get update && apt-get install -y python-pip mysql-client && pip install awscli

ARG MYSQL_CONTAINER_NAME
ENV MYSQL_CONTAINER_NAME $MYSQL_CONTAINER_NAME

ARG DIP
ENV DIP $DIP

ARG MYSQL_ADDRESS
ENV MYSQL_ADDRESS $MYSQL_ADDRESS

ARG MYSQL_USER
ENV MYSQL_USER $MYSQL_USER

ARG MYSQL_PASS
ENV MYSQL_PASS $MYSQL_PASS

ARG MYSQL_DB
ENV MYSQL_DB $MYSQL_DB


ARG AWS_ACCESS_KEY_ID
ENV AWS_ACCESS_KEY_ID $AWS_ACCESS_KEY_ID

ARG AWS_SECRET_ACCESS_KEY
ENV AWS_SECRET_ACCESS_KEY $AWS_SECRET_ACCESS_KEY

ARG AWS_DEFAULT_REGION
ENV AWS_DEFAULT_REGION $AWS_DEFAULT_REGION

ARG BACKUP_NAME
ENV BACKUP_NAME $BACKUP_NAME

ARG S3_FOLDER
ENV S3_FOLDER $S3_FOLDER

ARG S3_BUCKET_NAME
ENV S3_BUCKET_NAME $S3_BUCKET_NAME

ADD src/backupaws.sh /backupaws.sh
RUN chmod +x /backupaws.sh
CMD ["/backupaws.sh"]